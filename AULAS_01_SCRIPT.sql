CREATE TABLE PACIENTE(
COD_PACIENTE        NUMBER(4,0)     NOT NULL,
NOME_PACIENTE       VARCHAR2(30)    NOT NULL,
DATA_NASC           DATE,
SEXO                CHAR(1)         CHECK (SEXO IN ('F', 'M')),
ENDERECO            VARCHAR2(25),
CIDADE              VARCHAR2(20)    NOT NULL,
DESCONTO            VARCHAR2(1)     CHECK (DESCONTO IN ('S', 'N')),

CONSTRAINT PK_CODIGO_PACIENTE PRIMARY KEY (COD_PACIENTE)
);

CREATE TABLE MEDICO(
COD_MEDICO      NUMBER(4,0)         NOT NULL,
NOME_MEDICO     VARCHAR2(30)        NOT NULL,

CONSTRAINT PK_CODIGO_MEDICO PRIMARY KEY(COD_MEDICO)
);

CREATE TABLE CONSULTA(
COD_CONSULTA    NUMBER(3,0)         NOT NULL,
DATA_CONSULTA   DATE,
COD_PACIENTE    NUMBER(4,0)         NOT NULL,
COD_MEDICO      NUMBER(4,0)         NOT NULL,
VALOR_CONSULTA  NUMBER(7,2)         NOT NULL,
TIPO_CONSULTA   VARCHAR2(1)         CHECK (TIPO_CONSULTA IN( 'C', 'P')),

CONSTRAINT PK_CODIGO_CONSULTA PRIMARY KEY(COD_CONSULTA)
);

ALTER TABLE CONSULTA
ADD CONSTRAINT FK_CODIGO_PACIENTE
FOREIGN KEY (COD_PACIENTE)
REFERENCES PACIENTE (COD_PACIENTE)
ON DELETE CASCADE;

ALTER TABLE CONSULTA
ADD CONSTRAINT FK_CODIGO_MEDICO
FOREIGN KEY (COD_MEDICO)
REFERENCES MEDICO (COD_MEDICO)
ON DELETE CASCADE;





INSERT INTO PACIENTE
VALUES (001, 'Joao da Silva','01-09-1957','M','Rua das Flores, 301', 'Sorocaba','S');
INSERT INTO PACIENTE
VALUES (002, 'Henrique Matias','25-01-1960','M','Av. das Margaridas, 112','Sorocaba','S');
INSERT INTO PACIENTE
VALUES (003, 'Clara das Neves','20-01-1978','F','Rua Manoel Bandeira, 1100','Itu','S');
INSERT INTO PACIENTE
VALUES (004, 'Joao Pessoa','15-10-1945','M','Rua Maria Machado, 800','Salto','N');
INSERT INTO PACIENTE
VALUES (005, 'Karla da Cruz','29-12-1939','F','Av. Brasil, 701','Avare','S');
INSERT INTO PACIENTE
VALUES (006, 'Jandira Gomes','18-02-1940','F','Rua Jardim Florido, 1152','Sorocaba','N');
INSERT INTO PACIENTE
VALUES (007, 'Ana Maria Faracco','13-08-1980','F','Rua Jose Vieira, 65','Sorocaba','S');
INSERT INTO PACIENTE
VALUES (008, 'Roberto Faracco','01-01-1978','M','Rua Jose Vieira, 65','Sorocaba','S');
INSERT INTO PACIENTE
VALUES (009, 'Barbara Moreira','30-09-1969','F','Rua das Pedras, 127','Sao Paulo','N');
INSERT INTO PACIENTE
VALUES (010, 'Norberto Almeida','27-11-1937','M','Rua Capitao Pereira, 170','Itapetininga','S');


INSERT INTO MEDICO
VALUES (001, 'Roanldo Bueno');
INSERT INTO MEDICO
VALUES (002, 'Helena Ziglio');
INSERT INTO MEDICO
VALUES (003, 'Paulo Cesar Oliveira');
INSERT INTO MEDICO
VALUES (004, 'Roberto Sinatura');
INSERT INTO MEDICO
VALUES (005, 'João Marcos');


INSERT INTO CONSULTA
VALUES (001, '20-01-98',001,003,80.00,'C');
INSERT INTO CONSULTA
VALUES (002, '22-02-98',001,003,80.00,'C');
INSERT INTO CONSULTA
VALUES (003, '15-10-97',002,001,75.50,'P');
INSERT INTO CONSULTA
VALUES (004, '07-12-97',003,002,60.75,'P');
INSERT INTO CONSULTA
VALUES (005, '18-11-97',004,004,57.80,'C');
INSERT INTO CONSULTA
VALUES (006, '27-06-98',005,001,60.00,'C');
INSERT INTO CONSULTA
VALUES (007, '30-07-98',005,001,60.00,'C');
INSERT INTO CONSULTA
VALUES (008, '15-08-98',006,003,75.20,'P');
INSERT INTO CONSULTA
VALUES (009, '17-08-98',007,003,80.00,'P');
INSERT INTO CONSULTA
VALUES (010, '20-08-98',008,002,70.00,'C');
INSERT INTO CONSULTA
VALUES (011, '21-08-98',008,004,81.00,'C');
INSERT INTO CONSULTA
VALUES (012, '30-08-98',009,004,85.00,'P');
INSERT INTO CONSULTA
VALUES (013, '30-08-98',001,004,35.60,'C');
INSERT INTO CONSULTA
VALUES (014, '01-01-99',007,002,80.00,'P');
INSERT INTO CONSULTA
VALUES (015, '10-02-99',008,001,74.35,'P');
INSERT INTO CONSULTA
VALUES (016, '11-02-99',010,003,71.21,'C');
INSERT INTO CONSULTA
VALUES (017,'12-04-99',002,002,84.00,'C');


ALTER TABLE MEDICO
ADD VALOR_HONORARIO NUMBER(7,2);

UPDATE MEDICO
SET VALOR_HONORARIO = 50
WHERE COD_MEDICO = 001;
UPDATE MEDICO
SET VALOR_HONORARIO = 100
WHERE COD_MEDICO = 002;
UPDATE MEDICO
SET VALOR_HONORARIO = 20
WHERE COD_MEDICO = 003;
UPDATE MEDICO
SET VALOR_HONORARIO = 35
WHERE COD_MEDICO = 004;
UPDATE MEDICO
SET VALOR_HONORARIO = 28
WHERE COD_MEDICO = 005;